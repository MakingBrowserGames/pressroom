function checkOverride(e,t){if(e.is(":checked")){jQuery("."+t+" input").removeAttr("disabled");jQuery("."+t+" select").removeAttr("disabled");jQuery("."+t+" button").removeAttr("disabled");jQuery("."+t+" h3, ."+t+" label").css("color","#222")}else{jQuery("."+t+" input").attr("disabled","disabled");jQuery("."+t+" select").attr("disabled","disabled");jQuery("."+t+" button").attr("disabled","disabled");jQuery("."+t+" h3, ."+t+" label").css("color","#ddd");e.removeAttr("disabled");e.parent().parent().find("label").css("color","#222")}}jQuery(function(){jQuery(".pr-color-picker").wpColorPicker();if(jQuery(".chosen-select").length)jQuery(".chosen-select").chosen();jQuery("#_pr_date").datepicker({dateFormat:"yy-mm-dd"});var e=jQuery("#_pr_prefix_bundle_id");var t=jQuery("#_pr_subscription_prefix");jQuery("#_pr_prefix_bundle_id").keyup(function(){jQuery('#_pr_single_edition_prefix, #_pr_subscription_prefix, .pr_repeater input[type="text"]').trigger("keyup")});jQuery("#_pr_single_edition_prefix, #_pr_subscription_prefix").keyup(function(){var t=jQuery(this).next();t.html(e.val()+"."+jQuery(this).val());jQuery('.pr_repeater input[type="text"]').trigger("keyup")});jQuery(".form-table").delegate('.pr_repeater input[type="text"]',"keyup",function(){var n=jQuery(this).parent().find(".repeater-completer");n.html(e.val()+"."+t.val()+"."+jQuery(this).val())});jQuery("#_pr_prefix_bundle_id").trigger("keyup");jQuery("#add-field").click(function(n){n.preventDefault();var r=jQuery("#pr_repeater").clone();var i='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAARBAMAAAA1VnEDAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAF3AAABdwE7iaVvAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAA9QTFRF////AAAAAAAAAAAAAAAAUTtq8AAAAAR0Uk5TADVCUDgXPZIAAAAaSURBVAhbY2CgKVA2BgIjCJvRBQwEMGVoBQCxXAPsAZwyyQAAAABJRU5ErkJggg60a8c977b5851eb7a101a51c617fd8ad"/>';var s=jQuery(".pr_repeater").last().data("index");r.find("#add-field").attr("class","remove-field");r.find("#add-field").attr("id","remove-field");r.find("#remove-field").html(i);var o=jQuery(".pr_repeater").parent();r.data("index",parseInt(s)+1);r.find('input[type="text"]').val("");var u=r.find('input[type="text"]').attr("name");var a=r.find('input[type="radio"]').attr("name");r.find('input[type="text"]').attr("name",u.replace("[0]","["+(parseInt(s)+1)+"]"));r.find('input[type="radio"]').attr("name",a.replace("[0]","["+(parseInt(s)+1)+"]"));r.find(".repeater-completer").html(e.val()+"."+t.val());r.appendTo(o)});jQuery(".form-table").delegate(".remove-field","click",function(e){e.preventDefault();jQuery(this).parent().remove()});jQuery("#pressroom_metabox").removeClass("postbox");jQuery(".tabbed").css("display","none");jQuery(".hpub_metabox").css("display","table-row");jQuery(".basic_metabox").css("display","table-row");jQuery(".flatplan").css("display","table-row");jQuery(".nav-tab").click(function(e){e.preventDefault();jQuery(".nav-tab").each(function(){jQuery(this).removeClass("nav-tab-active")});var t=jQuery(this).data("tab");jQuery(this).addClass("nav-tab-active");jQuery(".tabbed").css("display","none");jQuery("."+t).css("display","table-row")});jQuery(".remove-file").click(function(e){e.preventDefault();if(confirm("Do you really want to delete this file?")){var t=jQuery(this).data("field");var n=jQuery(this).data("term");var r=jQuery(this).data("attachment");var i=jQuery(this);var s={field:t,term_id:n,attach_id:r,action:"remove_upload_file"};jQuery.post(ajaxurl,s,function(e){if(e){i.parent().find("img").css("display","none");i.css("display","none")}else{alert("Error. Please retry")}})}});jQuery("#test-connection").click(function(e){e.preventDefault();jQuery("#connection-result").html('<div class="spinner"></div>');jQuery("#connection-result").css("display","block");jQuery("#connection-result .spinner").css("display","inline-block").css("float","none");var t=jQuery('input[name="_pr_ftp_server[0]"]').val();var n=jQuery('input[name="_pr_ftp_server[1]"]').val();var r=jQuery('input[name="_pr_ftp_destination_path"]').val();var i=jQuery('input[name="_pr_ftp_user"]').val();var s=jQuery('input[name="_pr_ftp_password"]').val();var o=jQuery('input[name="_pr_ftp_protocol"]:checked').val();var u={server:t,port:n,base:r,user:i,password:s,protocol:o,action:"test_ftp_connection"};jQuery.post(ajaxurl,u,function(e){if(e){jQuery("#connection-result").html(e.data.message);jQuery("#connection-result").removeClass("connection-result-success connection-result-failure");jQuery("#connection-result").addClass("connection-result connection-result-"+e.data.class)}})});var n=jQuery("#_pr_web_override_eproject");var r=jQuery("#_pr_hpub_override_eproject");n.click(function(e){checkOverride(jQuery(this),"web_metabox")});r.click(function(e){checkOverride(jQuery(this),"hpub")});if(n.length){checkOverride(n,"web_metabox")}if(r.length){checkOverride(r,"hpub")}})
